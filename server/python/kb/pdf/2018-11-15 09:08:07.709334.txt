RESEARCHOpen AccessAge estimation algorithm of facial imagesbased on multi-label sortingZijiang Zhu1,3*, Hang Chen2,3,YiHu1,3and Junshan Li1,3AbstractMulti-label sorting learning has been successful in many fields. It can not only express the complex semanticinformation of learning objects, but also present good generalization ability in dealing with complex things. Thispaper proposes age estimation algorithm of facial images based on multi-label sorting. This estimation algorithmis for the lack of facial age dataset, and it changes the traditional multi-valued classification method, simplifiedthe problem of tedious steps to estimate age and shortened the time for model training. A series of experimentson two age datasets shows that the algorithm has achievedvery good results in evaluating indicators, and theseindicators include MAE (mean absolute error), CS (cumulative score), and convergence rate. When compared withsome classic algorithms of age estimation, the efficiency and accuracy of the algorithm are verified.Keywords:Multi-label sorting, Age estimation of facialimages, Mean absolute error, Cumulative score1 IntroductionIn recent years, multi-label sorting learning technologyhas been widely used in the research fields of documentclassification, image recognition, gene function prediction,and so on. However, the technology is relatively less ap-plied in the field of age estimation of facial images. In theage estimation dataset, the annotation method is usually afacial image corresponding to an accurate age value, butthere are many problems with such a simple annotationmethod. The most important of these problems is thatusing an accurate age value to represent the true age of afacial image is unreliable and unstable, due to the slowchanges in the face’s appearance and the slight differencesin facial images between similar ages as the age increases;it is easy to be confused with age classification. Inaddition, how to use the limited facial dataset to establisha good age estimation model has always been a problemfollowed with interest in the technical research process offacial age estimation, and the reason why this problem hasnot been resolved is due to the very small number of sam-ples in the age dataset of facial images.In the research of face age estimation, many scholarsput forward a conclusion of classical algorithm. Geng etal. proposed Aging Patterns Subspace (AGES) algorithm[1]; by constructing a representative subspace, the agingpattern of human face is modeled, but the modeling timeis longer. Guo et al. proposed the support vector machine(SVM) algorithm [2, 3] and support vector regression(SVR) algorithm [4, 5]; their algorithm is simple and ro-bust, but it will consume a lot of machine memory andcomputing time. Hong et al. proposed k-nearest neighborsorting (kNN) algorithm [6]; this algorithm is simple andaccurate, but it needs a lot of calculation. In addition, Li etal. proposed Ordinal Hyperplanes Ranker (OHRank) algo-rithm  [7], Geng et al.  proposed Improved IterativeScaling-Learning from Label Distribution (IIS-LLD) algo-rithm [8], and Yin et al. proposed Conditional ProbabilityNeural Network (CPN) algorithm [9]. Among them,IIS-LLD and CPNN are one of the label distribution (LD)algorithms [10]. All the algorithms in reference [7–9]canbe used to realize face age recognition. However, a largenumber of training samples are required, and the numberof training samples directly affects the accuracy of recog-nition. Liao et al. proposed a face age feature extractionmethod based on deep convolution neural network [11]; ithas strong discrimination and robustness, but the imple-mentation of neural network is more complex, and thetraining time of model is longer.* Correspondence:zzjgwng@sina.com1School of Information Science and Technology, South China BusinessCollege, Guangdong University of Foreign Studies, No. 181 Liangtian ZhongRoad, Baiyun District, Guangzhou 510545, China3Institute of Intelligent Information Processing, South China Business College,Guangdong University of Foreign Studies, Guangzhou 510545, ChinaFull list of author information is available at the end of the articleEURASIP Journal on Imageand Video Processing© The Author(s). 2018Open AccessThis article is distributed under the terms of the Creative Commons Attribution 4.0International License (http://creativecommons.org/licenses/by/4.0/), which permits unrestricted use, distribution, andreproduction in any medium, provided you give appropriate credit to the original author(s) and the source, provide a link tothe Creative Commons license, and indicate if changes were made.Zhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 https://doi.org/10.1186/s13640-018-0353-zIn this paper, a face age estimation algorithm based onmulti-label sorting is proposed, which can solve the prob-lems of insufficient training samples and long trainingtime of the model. At the same time, face age recognitionof different races and different genders also has a betterdiscrimination. Compared with other classical algorithms,it can achieve better face age recognition effect.2 A review of multi-label sorting learning2.1 Overview of multi-label sorting learningMulti-label sorting learning can naturally express thecomplex semantic information of learning objects andhas been successful in many fields. It was originally ap-plied in the field of text processing; for example, it oftenhas wrong classification due to the ambiguity of wordsin the document classification task. In addressing thischallenge, at first, Schapire and Singer [12] and othersimproved the AdaBoost algorithm and achieved signifi-cant results in BoostTexter, a Boosting-based multi-labeldocument classification system. After that, multi-labellearning began to attract the attention of more and moreresearchers and often appeared in many research fieldssuch as content identification of multi-media, bioinfor-matics, and information retrieval.Learning a good classifier requires a lot of trainingsample data. However, due to some practical problems,there are very few samples about this kind of markers,so it is impossible to train a highly accurate classificationmodel. For the label between different categories, thetraditional classification learning believes that it has al-most no correlation to exist independently. However,multi-label learning believes that it may have essentialinterrelationships for model training. Nevertheless, it isundeniable that making full use of useful informationbetween class labels can effectively reduce the difficultyof learning tasks under limited training data conditions.2.2 Theoretical content of multi-label sorting learningThe key to multi-label learning is to learn possible rela-tionships [13] between the output label of the trainingsamples, using these relationships to optimize mathem-atical models and improve model accuracy. First, it re-quires mathematical representation of the input trainingsamples, whereX∈Rdindicates that the feature distribu-tion of each training sample is within thed-dimensionalfeature space, whereY={y1,y2,⋯,ym} indicates a collec-tion that covers all training sample category labels. Now,the existing training sample set isD={(x1,Y1), (x2,Y2),⋯,(xn,Yn)}, in which each sample is represented by amulti-label;xi=[xi1,xi2,⋯,xid]Trepresents the charac-teristics of theith training sample;Yi⊂Yrepresents thecategory of annotation by theith training sample, whichis a subset of the label set. In order to meet the require-ments of model training, it is necessary to uniformlytrain the number of class labels in the sample anduseyi=[yi1,yi2,⋯,yim]Tto represent the label vectorcorresponding to the sample. Inyij∈{−1, +1}。,ifyij=+1,samplexiis marked as categoryyj; otherwise, samplexiisnot marked as categoryyj. The purpose of multi-labellearning is to get the mapping function from input to out-put:g:X→2Yaccording to the training sample set. In thedesign of mapping functions, it is often converted to opti-mal solution to the functionf=X×Y→Raccording to themodel requirements.f(x,y) indicates the possibility that thesamplexis marked asy, and the greaterf(x,y)is,thegreater the probability that the samplexis marked as classy. Therefore, the purpose of training is to make higher con-fidence level of category between each training sample andits relevant sample, while the lower confidence level of cat-egory is between the training sample and its irrelevantsample.After learning the mapping function, we need to use anevaluation indicator to measure the performance of it. Forthe multi-label attribute of the sample and learning thecorrelation between multiple label at the same time,multi-label sorting learning adopts the RL (ranking loss)function [14] as a standard to measure the function of themodel. The specific calculation formula is shown in Eq. (1):RLf;DðÞ¼1nXni¼11YijjYiy;yðÞjfxi;yðÞ≤fxi;yðÞ;y;yðÞ∈YiYið1ÞwhereYiandYirepresentxi’s relevant label set and ir-relevant label set, respectively. This indicator is used tocalculate the proportion of errors in the label sortingprocess caused by relevant and irrelevant tags. There-fore, the smaller the value of RL is, the better. When RLis taken to 0, it means that the irrelevant tags are all be-hind the relevant tags on all the samples.3 Method—age estimation mode of multi-labelsortingThe primary difficulty faced by the research is the lack oftraining samples on age estimation of face images. For bet-ter age estimation results, multi-label replaces the originalsingle label to represent marked face samples, and thesorting learning is based on the correlation between theage tag and the face image. So age estimation algorithmcan well establish the mapping relationship between faceimage and age based on multi-label sorting learning.The multi-label sorting learning is undoubtedly an im-portant means to effectively alleviate the specificity ofage estimation and the inaccurate age estimates causedby insufficient training data. This kind of multi-labelsorting algorithm first expresses facial image with onlysingle age label as a set of vectors, and the size of eachelement in the vector represents the correlation degreeZhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 2 of 10between the facial image and the corresponding agelabel. At the same time, it sorts the ages in ascendingorder and makes full use of the ordered information be-tween age labels [15, 16] to integrate the estimationmodels of each age into a model matrix. It implementsthe age estimation model through the model matrix, in-stead of building an age estimation model by construct-ing multiple binary classifiers. In the model buildingprocess, it introduces trace norm [17] of the modelmatrix to control the complexity of its model algorithmand uses the matrix recovery theory to achieve the opti-mal solution of the model [18, 19]. After the age estima-tion model is acquired, a correlation vector is obtainedthrough prediction of the face sample when performingthe algorithm model test, all the elements in the vectorare sorted in descending order, and the age label withthe largest correlation is selected as the estimated age,while the basis for selection is that the larger sortingvalue indicates the higher relevance between the faceimage and the age label. This age estimation modelshows a great advantage by making full use of the lim-ited face age estimation dataset and successfully introdu-cing a multi-label sorting technique, and at the sametime, it is simple and effective to shorten the time ofmodel training [20] in the operation of the matrix.3.1 Based on multi-label face samplesIn this paper, in order to adopt multi-label sorting to learnthe age estimation model to let multiple age labels markface images, first,X=[x1,x2,⋯,xn]∈Rd×nrepresents theinput of the training sample set,T={t1,t2,⋯,tm}isla-beled collection of all age labels,t1≺t2≺⋯≺tmrepre-sents the order relationship between the age label, andY=[y1,y2,⋯,yn]∈{0, 1}m×nis the age marker status cor-responding to the training sample set. Wherein, if the sam-plexiis marked with the age labelti, the two are related,correspondingly to the elementsyij= 1 andyij= 0 in theage label vectoryi; otherwise, they are not related. Accord-ing to the label’s representation method, a multiple agelabel is used instead of a single age label in the age dataset.Convert a single-label sample to a multi-label sample,where each face image corresponds to a label vector. Forthe traditional face age estimation problem, it is oftenconverted into multiple category classification problembased on individual age labels, then the positive andnegative samples are divided for each age value to con-struct binary classifier. After the use of multi-label repre-sentation, simple and effective matrix operations can notonly achieve the age estimation algorithm for multi-labellearning, but also learn the relationship between ages.3.2 The establishment of age estimation modelAfter multi-label representation of face images, on theone hand, all age labels are integrated in ascendingorder. On the other hand, the traditional face age esti-mation problem based on multi-age classification is con-verted into the study of age matrix. In order to controlthe complexity of the age estimation model, the matrixnorm of the model is introduced, and the matrix estima-tion theory is used to solve function of age estimation.The specific process of the model is shown in Fig.1.First, perform a mathematical description of the cor-relation function before the age estimation function isestablished. Assuming thatℓ(z) is a loss function, theprediction functionfi(x) is used to estimate the age oftest sample as theticonfidence level, generally the confi-dence value is between 0 and 1. The learned modelmarks the age of the age tag and gives it a higher score.In order to measure whether the predicted age valuepredicted by age estimation function is accurate,cisused to calculate the sorting loss of face sampleximarked as vectoryibetween agestjandtk. The specificcalculation Eq. (2) is as follows:ℰj;kxi;yiðÞ¼Iyij≠yikℓyij−yikfjxiðÞ−fkxiðÞð2ÞIn which the indicating function isI(z), the confidencevalue is 1 whenzis logical“true,”and the confidencevalue is 0 whenzis logical“false.”The function showsthat if the age label of face samplexiistjinstead oftk,that isyij=1andyik= 0, the resulting correlation meas-urement should havefj(xi)>fk(xi) according to theprediction function. The smaller the age difference be-tween the age labelstjandtk, the closer the predictedFig. 1Algorithm flow chartZhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 3 of 10correlation measurements are, then the smaller thesorting loss between them; on the contrary, the largerthe gap of age label, the greater the similarity differencecalculated, then the more likely to cause larger sortingloss. Therefore, it is in line with the definition that thecorrect age label is ranked in front of the incorrect agelabel in the face age estimation process. When the agelabel of face samplexiis neithertjnortk, then there is nosorting loss between the age labelstjandtk.Fromthis,itcan be seen that the sorting loss is caused by a piece offace image sample on all age labels as follows (3):εxi;yiðÞ¼Xmj;k¼1ɛj;kxi;yiðÞð3ÞThe sorting loss over the entire training data set is cal-culated based on a single face sample image and thenobtained according toPni¼1Ɛðxi;yiÞ. To simplify the cal-culation, strictly limit the prediction function to a linearfunctionfiðxÞ¼wTix. Combine the prediction functionscorresponding to all age labels into a parameter matrix,and define W = [w1,w2,⋯,wm]∈Rd×mas the matrixparameter to be learned. Assuming thatf(W) is the sort-ing loss over the entire training data set, definef(W) ac-cording to the previous multi-label sorting theory asshown in Eq. (4):fWðÞ¼1nXni¼1Xmj;k¼1ɛj;kxi;yiðÞ¼1nXni¼1Xmj;k¼1Iyij≠yikℓyij−yikwTjxi−wTkxið4ÞIn the case of serious shortage of training samples, thispractice is easy to produce over fitting phenomenon bydirectly searching the value ofWto minimize the sort-ing lossf(W). Base on this, a long-term age estimationstudy found that the face age estimation process isslowly changing and there is an orderly correlation be-tween the age labels. To take full advantage of this cor-relation, we believe that the prediction functions aboutWare linearly dependent, soWwill also cause thematrixWto be low rank, and its final optimizationproblem can be expressed by Eq. (5):minW∈ψfWðÞs:t:ψ¼W∈Rdm;rankWðÞ≤r;Wjjjj2≤sð5ÞAmong them, ,||·||2denotes the matrix spectral normandψdenotes the range of matrixW; the range consistsof the complexity of the control prediction model andthe low rank matrix characteristics. Because it is non-convex, the amount of calculation to directly solve Eq.(5) is very large. For convenience calculations, introducethe inequality Eq. (6):Wjjjj≤rankWðÞWjjjj2ð6ÞAmong them, ||·||∗denotes the matrix trace norm.Use the inequality (2–5) to replace the non-convex itemwith the Eq. (7):ψ;¼W∈Rdm:Wjjjj≤srð7ÞSo the problem of original optimization becomes a so-lution toW∈ψminfðWÞ.In order to further simplify the model, the final age es-timation objective function is established by the valuerange of matrix as regular terms and the optimizationproblem as Eq. (8) shows:W∈RdmminFWðÞ≔fWðÞþλWjjjjð8ÞAmong them, the regular item parameter takes thevalueλ> 0. The parameter is used to balance the loss ofthe regular term and the training sample set and pre-vents the over fitting of the objective function.3.3 Optimal solutionAfter establishing a multi-label ordered objective function,a gradient descent algorithm is used to prove that the ob-jective function is a convex function. In order to simplifythe calculation, the logistic function [21]ℓ(z)=log(1+e−z)is used in this paper as the formula in Eq. (2). Atthe time of thetiteration, under the premise thatthe solution of Eq. (8)isWt, firstly calculate thegradient of the objective functionF(W)atW=Wt,and if the gradient is set to∇F(Wt), then get theupdated solution of the objective function as shownin Eq. (9):Wtþ1¼Wt−ηt∇FWtðÞð9ÞAmong them,ηtrepresents the step length that is updatedat thetth iteration, which is generally set to a value greaterthan 0. SinceUtΣtis gradient ofW∗inW=Wt,Wt¼UtΣtVTtis SVD (singular value decomposition) decompositionofWt,then:∇FWtðÞ¼λUtVTtþ1nXni¼1Xmj;k¼1αijkxiemj−emkTð10Þwhere, in the formula,αijk¼Iðyij≠yikÞℓ0ððyij−yikÞxTiðwj−wkÞÞandemjais anmvector, in which only thejth elementis 1 and the other positions are 0.Because of the complexity of the SVD decompositioncalculation, it is easy to cause huge computational costwhen solving the gradient Eq. (10). In the calculation ofthe gradient of the smooth objective function, many re-searchers  find that  its convergence  rate  can reachO(T−2). In recent years, they have found a similarpattern, which is that the objective function can beZhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 4 of 10solved in an accelerated optimization manner if it con-tains a smooth term and a trace norm regular term. How-ever, in this paper, accelerated proximal gradient (APG)algorithm [22] is used to solve the optimization problemof the objective Eq. (9). The available update values areshown in Eq. (11) according to the APG algorithm:Wt¼arg  minw12ηtW−W0tF2þλWjjjjð11ÞAmong them,W0t¼Wt−1−ηt∇fðWt−1Þis the optimalsolution of the objective function according to the SVDdecomposition algorithm, as shown in Eq. (12):Wt¼UΣληtVTð12ÞIn Eq. (12),Σληtis the diagonal matrix, and (Σληt)ij=max {0,Σij−ληt}isalso.After the optimal solution is solved, we need to de-termine the step valueηtof each iteration, whichplays an important role in the acceleration algorithm.In this paper, a simple linear search is used to findthe most suitableηt. Assume thatPη(Wt−1)istheop-timal solution of Eq. (11)andQη(Pη(Wt−1),Wk−1)isthe optimal value calculated by Eq. (11). First, assumea step value and then search for the optimal step value foreach iteration based onF(Pη(Wt−1)) >Qη(Pη(Wt−1),Wk−1).The objective function can get the optimal matrix after theoptimization calculation according to Table1.4 Age estimation prediction and model evaluationcriteria4.1 Age estimation predictionFacial age recognition algorithm based on multi-labelsorting makes full use of the ordered information be-tween age labels in training samples. Through themulti-label sorting function established in the previoussection and the optimization solution, the age character-istic matrix is finally obtained. Assuming that the ob-tained age characteristic matrix isa, the predictionfunction of age estimation for this algorithm constructedthereby is as shown in Eq. (13).yt¼WTxtð13ÞAmong them,xtis the facial feature vector of the testface sample andytis the age label relevance vector cal-culated from the prediction Eq. (13). The size of eachelement represents the correlation degree between thetested face sample and the corresponding age label in thisvector. So all elements are sorted in a descending orderaccording to the correlation degree in the vector, whichgives the result that it is most likely to approach the realage when the correlation between the top-ranked agevalue and the tested face sample is maximized. Therefore,the age of facial image can be estimated, thereby complet-ing the design and implementation of the entire face ageestimation algorithm based on multi-tag sorting.4.2 Estimation model evaluation criteriaThe face age estimation algorithm mainly uses mean ab-solute error (MAE) and cumulative score (CS) as thestandard to measure the accuracy of age estimation [23].4.2.1 Mean absolute error (MAE)The mean absolute error is the average value of the ab-solute error between the predicted age and the true agethrough the age estimation of all tested face images. Thespecific formula is shown in Eq. (14):MAE¼1NbXNbi¼1ai−abijjð14ÞAmong them,Nbis the number of tested face samplesandaiandabiare the true age of theith tested face sam-ple and the predicted age obtained by the age estimationalgorithm, respectively. MAE visually describes the ac-curacy of sample set estimation through the age estima-tion algorithm. The smaller the MAE value, the higherthe accuracy of the age estimation.4.2.2 Cumulative score (CS)The cumulative score indicates that the tested faceimage is predicted by the age estimation process, whilethe difference between the age estimated by the algo-rithm and the true age of the face image is less than orequal to the ratio between the number of test sampleswith predetermined threshold and the total number oftest samples. The specific formula is shown in Eq. (15):CSeðÞ¼1NbXNbi¼1gai−abijj−eðÞð15ÞAmong them,g(·) is a Boolean function, and ifx≤0,theng(x) = 1; conversely,g(x)=0;eis the fault toleranceTable 1Multi-label sorting calculation algorithmAlgorithm: Multi-label sorting calculation algorithmEnter: Training sample set X¼fxi∈Rdgni¼1, corresponding to the agelabel set Y¼fyi∈f0;1gmgni¼1, and parameterλinitialized:η0=1,γ=2,α1=1,W0=Z0=Z1=Rd×n.Cycling when conditions do not converge:1. Set upη¼ηk−12. WhenFðPηðZk−1ÞÞ>QηðPηðZk−1Þ;Zk−1ÞÞ, so thatη≔ηγ3. Setηk¼η, and updateηk¼η:Wk=Pηk(Zk)αkþ1¼1þffiffiffiffiffiffiffiffiffi1þ4α2kp2Zkþ1¼Wkþðαk−1αkþ1ÞðWk−Wk−1ÞEnd CycleZhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 5 of 10rate, which is the set threshold;^Nis the number of testsamples;aiand^aiare the true age of theith tested facesample and predicted age, respectively. In the case of de-termining the value of thresholde, the larger the valueof CS, the more samples satisfy the condition and thebetter the effect of age estimation. This threshold is gen-erally set to 10 years old because it has reached theupper limit of the maximum age estimation error.The performance of the age estimation method can beevaluated from different perspectives based on twoevaluation criteria. The MAE values reflect the errorlevel of the age estimation algorithm as a whole; the CSreflects the accuracy of the age estimation methodthrough the error statistic curve within each age errorrange. These two evaluation methods are complemen-tary and coordinated.5 Experimental result and discussionsTo verify the accuracy of the proposed age estimation al-gorithm, a series of test experiments were conducted onthe two authoritative age datasets FG-NET and Refined-MORPH in this paper. At the same time, to test the per-formance of the algorithm, the experimental comparisonof the algorithm introduced in this paper will work withmultiple mainstream algorithms with higher accuracy ofage estimation.5.1 Experiment setupIn order to test the performance of multi-label sortingalgorithm, this paper selects two public age datasetsFG-NET and Refined-MORP; according to the characteris-tics of the respective datasets, different facial features wereextracted and the experiments were organized and tested.(1) The FG-NET dataset collects images of 1002 faceimages of 82 different individuals scanned by old photo-graphs. Each of these images has an average of 6 to 18face images of different ages, and the age distribution is0–69 years old. The AAM (active appearance model fea-ture) [24] is extracted from face features using am_tools;it also incorporates face shape and texture informationat the same time, thus fully embodying the change char-acteristics of the facial skull and slack skin during hu-man growth. In the process of extracting the AAMfeature of the face image, first, calibrate 68 key featurepoints of face, then extract face facial features with refer-ence to the AAM feature section, and finally pick outthe 95% AAM feature used by 95% of tests. The AAMfeature is selected from the extracted features using aPCA (principal component analysis) dimension reduc-tion algorithm, and its data dimension reaches 200 di-mensions after selected. According to the characteristicsof the age dataset itself, LOPO (leave-one-person-out)processing is used to divide training sets and test setswhen conducting the experimental design. That is allface images of an object are selected as test set, and allremaining face images are used as training set. After 82experiments, the average of all results was used as thefinal age estimate. Since the FG-NET dataset has smallernumber of pictures and is aimed at object acquisition,the use of the LOPO processing method is more preciseand scientific for experimental design.(2) In order to avoid the influence of gender and ethnicityon  face  age  estimation  studies,  this  paper  uses  theRefined-MORPH dataset. The dataset is carefully selectedout of 21,060 face data samples from the MORPH-II data-set. These samples include 2570 white female face photos(white female, WF), 7960 white male face photos (whitemale, WM), 2570 black female face photos (black female,BF), and 7960 black male face photos (black male, BM).The number distribution of the dataset is balanced on thewhite and black pictures. To verify the influence of genderand ethnicity for face age estimation, a total of 16 experi-ments were set up for the following four aspects:①nodifference between gender and race,②cross-race,③trans-sex, and④cross-race and gender. Before conductingthe test experiment, the 4096-dimensional BIF feature wasextracted from this dataset. It has been favored by many re-searchers in recent years in the field of face age estimation.In the process of experimental comparison, in order toensure the scientificity and consistency of the experi-ment and eliminate some influences, the age estimationalgorithm proposed in this paper and other comparisonalgorithms are performed under the same conditions in-cluding the dataset and face recognition. To verify theperformance of multi-label order learning on age estima-tion, this chapter selects several classic age estimation al-gorithms as comparison objects, including commonlyused classification or regression algorithms to solve theproblem of age estimation. In the experiment, UBSVMtool software was used to train SVM and SVR of faceage estimation algorithm model. In the kNN algorithm,thekvalue is set to 30 according to general experience.The experiments of AGES, OHRank, and LD were per-formed according to the algorithm and parameters de-signed by the author. But beyond that, the two datasetsalso verify the convergence of the algorithm.Meanwhile, in order to further verify the validity ofthe proposed multi-label learning in this paper andevaluate the impact of the ordering loss (R) and thenorm (T) on age estimation in the objective function,compare it with the original classification loss (C) andthe F norm (F) and compare it with the four groups oftarget loss functions: C&F, C&T, R&F, and R&T.5.2 Analysis of resultsAccording to the above experimental setup, this papercompares the proposed age estimation algorithm with theZhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 6 of 10corresponding algorithm on the FG-NET and Refined-MORPH datasets and conducts detailed analysis andevaluation. In order to make a scientific evaluation of thealgorithm, two evaluation indexes the MAE and the CSwere used in this paper.5.2.1 FG-NET datasetCalculate in accordance with MAE and CS curves onthe FG-NET dataset. The calculated MAE values areshown in Table2 for all algorithms.Table2 shows the MAE values of the AGES, SVM,SVR, kNN, OHRank, IIS-LLD, and CPNN algorithms inthe FG-NET dataset. It is thus clear that although thenew proposed OHRank and CPNN algorithms have beenreduced in age estimation error in recent years, themulti-label sorting algorithm proposed in this paper hasreduced the estimated error rate by 3% and 9% respect-ively compared to the two, and it has achieved the besteffect in all comparison algorithms. The CS curve is cal-culated on the FG-NET dataset according to the CSevaluation index calculation method as shown in Fig.2,and the threshold setting here accepts an age error valueof 10 years.It can be seen from Fig.3 that although the FG-NETdataset is small, the multi-label sorting learning algo-rithm proposed in this paper has almost achieved themaximum CS value at each error value. It shows thatthe algorithm can estimate the number of accurate sam-ples more and more as the acceptable error increases onthe whole.5.2.2 Refined-MORPH datasetTable3 shows the MAE values calculated by using the dif-ferent algorithms in the Refined-MORPH dataset basedon the face experiments of different genders and races.Table3 shows the MAE values of the AGRES, SVM,SVR, kNN, OHRank, IIS-LLD, and CPNN algorithms inthe Refined-MORPH dataset. In this table, the newlyproposed OHRank and label distribution algorithm stillbelongs to the previously proposed algorithm in general,but it is not as good as the multi-label sorting learningalgorithm proposed in this paper on the whole. Inaddition, from this table, it is also found that the smal-lest age estimation error and the next smallest MAEvalue are between same-sex ethnic groups, while the lar-gest MAE value is regardless of gender and ethnicity.This finding shows that the problem of age estimation offace is vulnerable to gender and ethnicity. From the datain Table3, it can be concluded that the algorithm pro-posed in this paper is superior to other algorithms in theexperiments of face age recognition of different sexesand races.5.2.3 Convergence detectionFigures3 and 4 show the convergence of the algorithm’sobjective function on the FG-NET and Refined-MORPHTable 2MAE results of FG-NET datasetMethodsFG-NETAGES6.77SVM7.25SVR5.91kNN8.24OHRank4.48IIS-LLD5.76CPNN4.76Multi-label4.35Fig. 2CS curves with different error levels on the FG-NET datasetZhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 7 of 10datasets, respectively. Convergence has achieved a fasterrate on both datasets; it illustrates the problem of trans-lating the age estimation into matrix model throughmulti-label sorting learning, which not only simplifiesthe steps of the age estimation model, but also shortensthe construction time of the model.5.2.4 Comparison between different loss functionsTo verify the effect of RL(R) and the norm (T) on age esti-mation in the objective loss function. In this paper, classi-fication loss (C) and F norm (F) are used as benchmarksfor comparison to form C&F, C&T, R&F, R&T total fourage-estimated loss functions. Table4 shows the MAEvalues obtained on the FG-NET and Refined-MORGHdatasets. From the table, we can see that R&T achieves asmaller MAE value than other loss functions, whichproves the effectiveness of the algorithm.Based on the above experimental analysis, the age esti-mation algorithm of multi-label sorting learning proposedby this paper has achieved good results whether it is fromthe MAE value of evaluating indicator, the CS curve orthe convergence speed, which is mainly attributed to theeffectiveness of multi-label sorting learning. First, usingmulti-age labels to represent face samples in the case oflimited training samples, it not only enriches the represen-tation of the dataset to certain extent, but also transformsthe traditional multi-category age estimation method intothe solution of age matrix, thereby shortening the trainingtime of the age estimation model. At the same time, inorder to learn the orderly information between the agetags, the algorithm uses the sorting loss function and in-troduces the matrix norm, which not only successfully re-duces the age estimation error, but also verifies theeffectiveness of the proposed target loss function in thispaper through the fourth set of experiments.6 ConclusionsAlthough multi-label learning is widely used in the fieldsof text analysis, bioinformatics analysis, and so on andpresents good generalization ability in dealing with com-plex things, it is still unknown to improve the accuracyof face age estimation. For the insufficiency of the agedataset, this paper first transforms the single age label ofthe face image sample into the multi-label vector ac-cording to the correlation degree and then integrates amatrix of age characteristics following sequence of age,which changes the traditional method of multiple binaryclassification. The use and study of matrix operation ofage simplifies the tedious steps of age estimation prob-lem and shortens the model training time on age estima-tion model. At the same time, in order to take fulladvantage of the age-label ordering information to makeup for the lack of training samples, the multi-label learn-ing method uses ranking loss function to learn theFig. 3Convergence of the objective function on FG-NET datasetTable 3MAE results of Refined-MORPH datasetTrain  Test  MethodsSVM   SVR  kNN   OHRank  IIS-LLD  CPNN  Multi-labelWF   WF   7.77   7.75  6.79   5.104.865.32   4.56BF   8.27   7.79  9.38   6.567.147.22   6.65WM  9.41   9.46  9.51   6.936.347.48   6.36BM   9.03   8.96  9.49   8.138.268.51   8.21WM   WF   9.69   6.66  10.74  8.397.298.43   5.86BF   9.04   7.32  10.25  8.518.118.71   6.63WM  5.05   5.14  4.90   4.163.594.15   3.43BM   8.58   8.33  9.68   6.246.266.45   6.67BFWF   8.37   8.06  10.66  7.478.477.29   6.79BF   7.57   7.12  7.85   5.955.496.35   5.25WM  9.41   8.46  10.72  8.349.388.90   8.12BM   9.23   9.33  10.30  7.617.678.19   7.26BM   WF   13.33  7.47  11.33  11.4710.32   7.29   8.45BF   11.47  6.99  11.16  9.729.066.35   6.56WM  7.53   6.95  9.38   6.136.958.90   6.01BM   6.33   5.77  7.39   4.974.248.19   3.87Fig. 4Convergence of the objective function on Refined-MORPHdatasetZhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 8 of 10sequence information between all age tags and introducesa matrix trace norm to control the complexity of an ageestimation model. The optimization of an age estimationmodel is achieved through the APG algorithm during thesolution  process  of  the  model.  For  the  proposedmulti-label learning algorithm, this paper conducted aseries of experiments on two age datasets and verified itsefficiency and accuracy compared to some classical algo-rithms of age estimation.AbbreviationsAAM:Active appearance model feature; AGES: Aging Patterns Subspace;CPN: Conditional Probability Neural Network; CS: Cumulative score; IIS-LLD: Improved Iterative Scaling-Learning from Label Distribution; kNN: k-nearest neighbor sorting; LD: Label distribution; LOPO: Leave-one-person-out;MAE: Mean absolute error; OHRank: Ordinal hyperplanes ranker; PCA: Principalcomponent analysis; RL: Ranking loss; SDV: Singular value decomposition;SVM: Support vector machine; SVR: Support vector regression; WM: White maleAcknowledgementsThe authors thank the editor and anonymous reviewers for their helpfulcomments and valuable suggestions.FundingThis work was supported in part by a grant from the Characteristicsinnovation project of colleges and universities of Guangdong Province(Natural Science, No. 2016KTSCX182, 2016) and a grant from the YouthInnovation Talent Project of colleges and universities of GuangdongProvince (No. 2016KQNCX230, 2016).Availability of data and materialsWe can provide the data.About the authorsZijiang Zhu received a master’s degree in software engineering from WuhanUniversity in 2009 and a senior engineer title in 2008. From 2012 to 2016, hewas the seventh batch of school level training objects of“thousand, 100 andten”projects in Guangdong higher education institutions. He is a seniormember of the China Computer Federation. He is currently an associateprofessor, dean of the School of Information Science and Technology, anddeputy director of the Institute for intelligent information processing, SouthChina Business College of Guangdong University of Foreign Studies,Guangzhou, China. His current research areas include image processing,machine learning, and big data technology.Hang Chen received a master’s degree in software engineering fromGuangdong University of Technology in 2012 and a senior engineer title in2007. From 2012 to 2016, he was the seventh batch of school level trainingobjects of“thousand, 100 and ten”projects in Guangdong higher educationinstitutions. He is currently an associate professor and associate dean of theSchool of Computer Science and Engineering, Tianhe College of GuangdongPolytechnic Normal University, Guangzhou, China. His current research areasinclude cloud computing technology, image recognition, data mining, andpersonalized recommendation technology.Yi Hu received a master’s degree in software engineering from South ChinaUniversity of Technology in 2018 and a senior engineer title for InformationSystem Project Management in 2015. He is currently a lecturer and deanassistant of the School of Information Science and Technology, South ChinaBusiness College of Guangdong University of Foreign Studies, Guangzhou,China. His current research areas include image processing, machinelearning, and big data technology.Junshan Li was promoted to professor in 1999. He obtained a doctorate incomputer system structure in 2001 and was elected as a provincial andministerial expert in 2002. He is the head of the national boutique resourcesharing course and the head of the national boutique course, the director ofthe China Computer Society, and the director of the Chinese Society ofImage and Graphics. He is currently the director of the Institute of IntelligentInformation Processing of South China Business School of GuangdongUniversity of Foreign Studies. His current research interests include imageprocessing and image understanding, intelligent computing, and intelligentsystems.Authors’contributionsAll authors take part in the discussion of the work described in this paper.The author ZZ wrote the first version of the paper and did part of theexperiments of the paper. HC, JL, and YH revised the paper in differentversions of the paper. All authors read and approved he final manuscript.Ethics approval and consent to participateNot applicable.Consent for publicationNot applicable.Competing interestsThe authors declare that they have no competing interests.Publisher’sNoteSpringer Nature remains neutral with regard to jurisdictional claims in publishedmaps and institutional affiliations.Author details1School of Information Science and Technology, South China BusinessCollege, Guangdong University of Foreign Studies, No. 181 Liangtian ZhongRoad, Baiyun District, Guangzhou 510545, China.2School of ComputerScience and Engineering, Tianhe College of Guangdong Polytechnic NormalUniversity, No. 628 Taihe Xingtai San Road, Baiyun District, Guangzhou510540, China.3Institute of Intelligent Information Processing, South ChinaBusiness College, Guangdong University of Foreign Studies, Guangzhou510545, China.Received: 24 July 2018 Accepted: 4 October 2018References1.   X. Geng, Z.H. Zhou, K. Smithmiles, Correction to“automatic age estimationbased on facial aging patterns”. IEEE Trans. Pattern Anal. Mach. Intell.30(2),368–381 (2008)2.   G. Guo, G. Mu, Y. Fu, Human age estimation using bio-inspired features.Comput. Vis. Pattern Recognit.2009. CVPR 2009. IEEE, 112–119 (2009)3.   G. Guo, G. Mu, Simultaneous dimensionality reduction and human ageestimation via kernel partial least squares regression. Comput. Vis. PatternRecognit. IEEE,42(7), 657–664 (2011).4.   G. Guo, Y. Fu, T.S. Huang, Locally adjusted robust regression for human ageestimation. IEEE Trans. Pattern Anal. Mach. Intell.76(6), 331–346 (2014)5.   C. Li, Q. Liu, Image-based human age estimation by manifold learning andlocally adjusted robust regression. IEEE Trans. Image Process.64(1),1176–1188 (2016)6.   R. Hong, Z. Hu, L. Liu, Understanding blooming human groups in socialnetworks. IEEE Trans. Multimedia17(11), 1–15 (2016)7.   C. Li, Q. Liu, W. Dong, Human age estimation based on locality and ordinalinformation. IEEE Trans. Cybern45(11), 2522–2534 (2017)8.   X. Geng, Z.H. Zhou, K.S. Miles,Facial Age  Estimation  by  Learning  from  LableDistributions(Proceedings of the 24th AAAI Conference on ArtificialIntelligence, Atlanta, 2010), pp. 451–4569.   C. Yin, X. Geng, Facial age estimation by conditional probability neuralnetwork. Pattern Recognit. Springer, Berlin Heidelberg15(2), 243–250 (2012)10.  Q. Zhao, X. Geng, Selection of objective functions in market-distributivelearning. Com. Sci. Explor.11(5), 708–719 (2017)Table 4MAE results of FG-NET datasetMethodsImage datasetFG-NETRefined-MORGHC&F6.9110.78C&T6.4610.17R&F5.439.79R&T4.358.12Zhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 9 of 1011.  Liao H B, Yan Y C, Dai W H and Fan P: Age Estimation of Face Images Basedon CNN and Divide-And-Rule Strategy, Mathematical Problems inEngineering, 201812.  R.E. Schapire, Y. Singer, Improved boosting algorithms using confidence-rated predictions. Mach. Learn.37(3), 297–336 (1999)13.  G. Liu, Z. Lin, S. Yan, Robust recovery of subspace structures by low-rankrepresentation. IEEE Trans. Pattern Anal. Mach. Intell.35(1), 171–184 (2010)14.  Z.B. Ren, L.L. Wang, Z.L. Fu, Multi-label classification integration learningalgorithm based on ranking loss. Comput. Appl.33((S1)), 40–42 (2013) 6815.  C.W.L. Chao, J.Z. Liu, J.J. Ding, Facial age estimation based on label-sensitivelearning and age-oriented regression. Pattern Recogn.46(3), 628–641 (2013)16.  K. Chen, S. Gong, T. Xiang, Cumulative attribute space for age and crowddensity estimation. IEEE Conf. Comput. Vis. Pattern Recognit. IEEE ComputSoc.9(4), 2467–2474 (2013)17.  K. Yu, X.J. Wu, Semi-supervised community discovery of latent mappingbased on KL divergence matrix traces. Comput. Eng.12, 296–302 (2017)18.  K.-C. Toh, Yun, An accelerated proximal gradient algorithm for nuclear normregularized least squares problems. Pacif. J. Optim.6(3), 615–640 (2010)19.  S. Ji, J. Ye,An  Accelerated Gradient Method for Trace Norm  Minimization(International Conference on Machine Learning, ICML 2009, Montreal, 2009),pp. 457–46420.  S.J. Huang, Demilitarization of the Use of Marker Relationships in Multi-Marker Learning. Journal of Nanjing University (Natural Science Edition).56(8), 882-890 (2015)21.  Y.F. Guo, F.Y. Ning, H.H. Chao, A socialized matrix decompositionrecommendation algorithm based on logistic function. J. Beijing Inst.Technol.36(1), 70–74 (2016)22.  Y.M. Wang, J.P. Zhai, Y. Mo, 3D reconstruction of human body based onorthogonal matching tracking and accelerating proximal gradient. Chin. J.Biomed. Eng.36(4), 385–393 (2017)23.  Q. Wang, Face Age Estimation Based on Adaptive Marker Distribution Learning.Journal of Southeast University (Natural Science Edition).3, 475–479 (2017)24.  L.F. Xu, J.Y. Wang, J.N. Cui, Dynamic expression recognition based ondynamic time warping and active appearance model. Chinese. J. Electron.Inf. (EIS)40(2), 338–345 (2018)Zhuet al. EURASIP Journal on Image and Video Processing       (2018) 2018:114 Page 10 of 10EURASIPJournalonImage&VideoProcessingisacopyrightofSpringer,2018.AllRightsReserved.